import{q as fe,v as g,c as J,a as Q}from"./Yzt2urwL.js";import{d as b,a5 as kt,b as h,g as l,bn as Tt,a8 as pe,an as k,aW as ge,aX as St,aV as be,B as ve,v as I,y as me,aj as ye,u as T,p as W,f as $,I as tt,a as K,bo as Ot}from"./CVSPMpBs.js";import{i as et}from"./DxmVAmoL.js";import{p as v}from"./BnCb6zDN.js";import{C as we,D as Te,z as Se,g as f,E as Ee,F as xe,G as Ce,H as Me,J as nt,K as N,c as Ae,a as at,x as Dt,w as Rt,v as Pt,m as Ie,y as Fe,L as Ne}from"./CmyOBuUo.js";function F(n){let t=b(kt(n));return{[Te]:!0,[we]:!0,get current(){return l(t)},set current(e){h(t,e,!0)}}}F.from=Se;F.with=f;F.flatten=Ee;F.readonly=xe;F.isBox=Ce;F.isWritableBox=Me;const ke=typeof window<"u"?window:void 0;function Oe(n){let t=n.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}class De extends Map{#t=new Map;#e=b(0);#n=b(0);#r=Tt||-1;constructor(t){if(super(),t){for(var[e,r]of t)super.set(e,r);this.#n.v=super.size}}#s(t){return Tt===this.#r?b(t):pe(t)}has(t){var e=this.#t,r=e.get(t);if(r===void 0){var s=super.get(t);if(s!==void 0)r=this.#s(0),e.set(t,r);else return l(this.#e),!1}return l(r),!0}forEach(t,e){this.#i(),super.forEach(t,e)}get(t){var e=this.#t,r=e.get(t);if(r===void 0){var s=super.get(t);if(s!==void 0)r=this.#s(0),e.set(t,r);else{l(this.#e);return}}return l(r),super.get(t)}set(t,e){var r=this.#t,s=r.get(t),o=super.get(t),i=super.set(t,e),u=this.#e;if(s===void 0)s=this.#s(0),r.set(t,s),h(this.#n,super.size),k(u);else if(o!==e){k(s);var a=u.reactions===null?null:new Set(u.reactions),c=a===null||!s.reactions?.every(p=>a.has(p));c&&k(u)}return i}delete(t){var e=this.#t,r=e.get(t),s=super.delete(t);return r!==void 0&&(e.delete(t),h(this.#n,super.size),h(r,-1),k(this.#e)),s}clear(){if(super.size!==0){super.clear();var t=this.#t;h(this.#n,0);for(var e of t.values())h(e,-1);k(this.#e),t.clear()}}#i(){l(this.#e);var t=this.#t;if(this.#n.v!==t.size){for(var e of super.keys())if(!t.has(e)){var r=this.#s(0);t.set(e,r)}}for([,r]of this.#t)l(r)}keys(){return l(this.#e),super.keys()}values(){return this.#i(),super.values()}entries(){return this.#i(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return l(this.#n),super.size}}class Re{#t;#e;constructor(t={}){const{window:e=ke,document:r=e?.document}=t;e!==void 0&&(this.#t=r,this.#e=fe(s=>{const o=g(e,"focusin",s),i=g(e,"focusout",s);return()=>{o(),i()}}))}get current(){return this.#e?.(),this.#t?Oe(this.#t):null}}new Re;class ct{#t;#e;constructor(t){this.#t=t,this.#e=Symbol(t)}get key(){return this.#e}exists(){return ge(this.#e)}get(){const t=St(this.#e);if(t===void 0)throw new Error(`Context "${this.#t}" not found`);return t}getOr(t){const e=St(this.#e);return e===void 0?t:e}set(t){return be(this.#e,t)}}function Pe(n,t){switch(n){case"post":I(t);break;case"pre":ve(t);break}}function Lt(n,t,e,r={}){const{lazy:s=!1}=r;let o=!s,i=Array.isArray(n)?[]:void 0;Pe(t,()=>{const u=Array.isArray(n)?n.map(c=>c()):n();if(!o){o=!0,i=u;return}const a=me(()=>e(u,i));return i=u,a})}function w(n,t,e){Lt(n,"post",t,e)}function Le(n,t,e){Lt(n,"pre",t,e)}w.pre=Le;function _(n){I(()=>()=>{n()})}function Be(n,t){return setTimeout(t,n)}function E(n){ye().then(n)}const We=1,Ke=9,_e=11;function it(n){return nt(n)&&n.nodeType===We&&typeof n.nodeName=="string"}function Bt(n){return nt(n)&&n.nodeType===Ke}function Ge(n){return nt(n)&&n.constructor?.name==="VisualViewport"}function Ue(n){return nt(n)&&n.nodeType!==void 0}function Wt(n){return Ue(n)&&n.nodeType===_e&&"host"in n}function Ve(n,t){if(!n||!t||!it(n)||!it(t))return!1;const e=t.getRootNode?.();if(n===t||n.contains(t))return!0;if(e&&Wt(e)){let r=t;for(;r;){if(n===r)return!0;r=r.parentNode||r.host}}return!1}function G(n){return Bt(n)?n:Ge(n)?n.document:n?.ownerDocument??document}function Kt(n){return Wt(n)?Kt(n.host):Bt(n)?n.defaultView??window:it(n)?n.ownerDocument?.defaultView??window:window}function ze(n){let t=n.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}class lt{element;#t=T(()=>this.element.current?this.element.current.getRootNode()??document:document);get root(){return l(this.#t)}set root(t){h(this.#t,t)}constructor(t){typeof t=="function"?this.element=f(t):this.element=t}getDocument=()=>G(this.root);getWindow=()=>this.getDocument().defaultView??window;getActiveElement=()=>ze(this.root);isActiveElement=t=>t===this.getActiveElement();getElementById(t){return this.root.getElementById(t)}querySelector=t=>this.root?this.root.querySelector(t):null;querySelectorAll=t=>this.root?this.root.querySelectorAll(t):[];setTimeout=(t,e)=>this.getWindow().setTimeout(t,e);clearTimeout=t=>this.getWindow().clearTimeout(t)}const L="ArrowDown",ht="ArrowLeft",dt="ArrowRight",H="ArrowUp",_t="End",Gt="Enter",qe="Escape",Ut="Home",He="PageDown",je="PageUp",ft=" ",Ye="Tab";function Xe(n){return window.getComputedStyle(n).getPropertyValue("direction")}function Ze(n="ltr",t="horizontal"){return{horizontal:n==="rtl"?ht:dt,vertical:L}[t]}function Je(n="ltr",t="horizontal"){return{horizontal:n==="rtl"?dt:ht,vertical:H}[t]}function Qe(n="ltr",t="horizontal"){return["ltr","rtl"].includes(n)||(n="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:Ze(n,t),prevKey:Je(n,t)}}const $e=typeof document<"u",Et=tn();function tn(){return $e&&window?.navigator?.userAgent&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||window?.navigator?.maxTouchPoints>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function x(n){return n instanceof HTMLElement}function ot(n){return n instanceof Element}function Vt(n){return n instanceof Element||n instanceof SVGElement}function ur(n){return n.matches(":focus-visible")}function ar(n){return n!==null}function en(n){return n instanceof HTMLInputElement&&"select"in n}class nn{#t;#e=F(null);constructor(t){this.#t=t}getCandidateNodes(){return this.#t.rootNode.current?this.#t.candidateSelector?Array.from(this.#t.rootNode.current.querySelectorAll(this.#t.candidateSelector)):this.#t.candidateAttr?Array.from(this.#t.rootNode.current.querySelectorAll(`[${this.#t.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,e,r=!1){const s=this.#t.rootNode.current;if(!s||!t)return;const o=this.getCandidateNodes();if(!o.length)return;const i=o.indexOf(t),u=Xe(s),{nextKey:a,prevKey:c}=Qe(u,this.#t.orientation.current),p=this.#t.loop.current,d={[a]:i+1,[c]:i-1,[Ut]:0,[_t]:o.length-1};if(r){const U=a===L?dt:L,M=c===H?ht:H;d[U]=i+1,d[M]=i-1}let S=d[e.key];if(S===void 0)return;e.preventDefault(),S<0&&p?S=o.length-1:S===o.length&&p&&(S=0);const y=o[S];if(y)return y.focus(),this.#e.current=y.id,this.#t.onCandidateFocus?.(y),y}getTabIndex(t){const e=this.getCandidateNodes(),r=this.#e.current!==null;return t&&!r&&e[0]===t?(this.#e.current=t.id,0):t?.id===this.#e.current?0:-1}setCurrentTabStopId(t){this.#e.current=t}focusCurrentTabStop(){const t=this.#e.current;if(!t)return;const e=this.#t.rootNode.current?.querySelector(`#${t}`);!e||!x(e)||e.focus()}}class rn{#t;#e=null;constructor(t){this.#t=t,_(()=>this.#n())}#n(){this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null)}run(t){this.#n();const e=this.#t.ref.current;if(e){if(typeof e.getAnimations!="function"){this.#r(t);return}this.#e=window.requestAnimationFrame(()=>{const r=e.getAnimations();if(r.length===0){this.#r(t);return}Promise.allSettled(r.map(s=>s.finished)).then(()=>{this.#r(t)})})}}#r(t){const e=()=>{t()};this.#t.afterTick?E(e):e()}}class sn{#t;#e;#n;#r=b(!1);constructor(t){this.#t=t,h(this.#r,t.open.current,!0),this.#e=t.enabled??!0,this.#n=new rn({ref:this.#t.ref,afterTick:this.#t.open}),w(()=>this.#t.open.current,e=>{e&&h(this.#r,!0),this.#e&&this.#n.run(()=>{e===this.#t.open.current&&(this.#t.open.current||h(this.#r,!1),this.#t.onComplete?.())})})}get shouldRender(){return l(this.#r)}}function m(){}class on{eventName;options;constructor(t,e={bubbles:!0,cancelable:!0}){this.eventName=t,this.options=e}createEvent(t){return new CustomEvent(this.eventName,{...this.options,detail:t})}dispatch(t,e){const r=this.createEvent(e);return t.dispatchEvent(r),r}listen(t,e,r){const s=o=>{e(o)};return g(t,this.eventName,s,r)}}function xt(n,t=500){let e=null;const r=(...s)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{n(...s)},t)};return r.destroy=()=>{e!==null&&(clearTimeout(e),e=null)},r}function zt(n,t){return n===t||n.contains(t)}function qt(n){return n?.ownerDocument??document}function un(n,t){const{clientX:e,clientY:r}=n,s=t.getBoundingClientRect();return e<s.left||e>s.right||r<s.top||r>s.bottom}const an=[Gt,ft],cn=[L,je,Ut],Ht=[H,He,_t],ln=[...cn,...Ht];function Ct(n){return n.pointerType==="mouse"}function hn(n,{select:t=!1}={}){if(!n||!n.focus)return;const e=G(n);if(e.activeElement===n)return;const r=e.activeElement;n.focus({preventScroll:!0}),n!==r&&en(n)&&t&&n.select()}function dn(n,{select:t=!1}={},e){const r=e();for(const s of n)if(hn(s,{select:t}),e()!==r)return!0}var jt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],j=jt.join(","),Yt=typeof Element>"u",A=Yt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Y=!Yt&&Element.prototype.getRootNode?function(n){var t;return n==null||(t=n.getRootNode)===null||t===void 0?void 0:t.call(n)}:function(n){return n?.ownerDocument},B=function(t,e){var r;e===void 0&&(e=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=s===""||s==="true",i=o||e&&t&&B(t.parentNode);return i},fn=function(t){var e,r=t==null||(e=t.getAttribute)===null||e===void 0?void 0:e.call(t,"contenteditable");return r===""||r==="true"},Xt=function(t,e,r){if(B(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(j));return e&&A.call(t,j)&&s.unshift(t),s=s.filter(r),s},X=function(t,e,r){for(var s=[],o=Array.from(t);o.length;){var i=o.shift();if(!B(i,!1))if(i.tagName==="SLOT"){var u=i.assignedElements(),a=u.length?u:i.children,c=X(a,!0,r);r.flatten?s.push.apply(s,c):s.push({scopeParent:i,candidates:c})}else{var p=A.call(i,j);p&&r.filter(i)&&(e||!t.includes(i))&&s.push(i);var d=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),S=!B(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(d&&S){var y=X(d===!0?i.children:d.children,!0,r);r.flatten?s.push.apply(s,y):s.push({scopeParent:i,candidates:y})}else o.unshift.apply(o,i.children)}}return s},Zt=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Jt=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||fn(t))&&!Zt(t)?0:t.tabIndex},pn=function(t,e){var r=Jt(t);return r<0&&e&&!Zt(t)?0:r},gn=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},Qt=function(t){return t.tagName==="INPUT"},bn=function(t){return Qt(t)&&t.type==="hidden"},vn=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return e},mn=function(t,e){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===e)return t[r]},yn=function(t){if(!t.name)return!0;var e=t.form||Y(t),r=function(u){return e.querySelectorAll('input[type="radio"][name="'+u+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=mn(s,t.form);return!o||o===t},wn=function(t){return Qt(t)&&t.type==="radio"},Tn=function(t){return wn(t)&&!yn(t)},Sn=function(t){var e,r=t&&Y(t),s=(e=r)===null||e===void 0?void 0:e.host,o=!1;if(r&&r!==t){var i,u,a;for(o=!!((i=s)!==null&&i!==void 0&&(u=i.ownerDocument)!==null&&u!==void 0&&u.contains(s)||t!=null&&(a=t.ownerDocument)!==null&&a!==void 0&&a.contains(t));!o&&s;){var c,p,d;r=Y(s),s=(c=r)===null||c===void 0?void 0:c.host,o=!!((p=s)!==null&&p!==void 0&&(d=p.ownerDocument)!==null&&d!==void 0&&d.contains(s))}}return o},Mt=function(t){var e=t.getBoundingClientRect(),r=e.width,s=e.height;return r===0&&s===0},En=function(t,e){var r=e.displayCheck,s=e.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var o=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(t).visibility==="hidden")return!0;var i=A.call(t,"details>summary:first-of-type"),u=i?t.parentElement:t;if(A.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof s=="function"){for(var a=t;t;){var c=t.parentElement,p=Y(t);if(c&&!c.shadowRoot&&s(c)===!0)return Mt(t);t.assignedSlot?t=t.assignedSlot:!c&&p!==t.ownerDocument?t=p.host:t=c}t=a}if(Sn(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Mt(t);return!1},xn=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var r=0;r<e.children.length;r++){var s=e.children.item(r);if(s.tagName==="LEGEND")return A.call(e,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}e=e.parentElement}return!1},Z=function(t,e){return!(e.disabled||B(e)||bn(e)||En(e,t)||vn(e)||xn(e))},ut=function(t,e){return!(Tn(e)||Jt(e)<0||!Z(t,e))},Cn=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},$t=function(t){var e=[],r=[];return t.forEach(function(s,o){var i=!!s.scopeParent,u=i?s.scopeParent:s,a=pn(u,i),c=i?$t(s.candidates):u;a===0?i?e.push.apply(e,c):e.push(u):r.push({documentOrder:o,tabIndex:a,item:s,isScope:i,content:c})}),r.sort(gn).reduce(function(s,o){return o.isScope?s.push.apply(s,o.content):s.push(o.content),s},[]).concat(e)},te=function(t,e){e=e||{};var r;return e.getShadowRoot?r=X([t],e.includeContainer,{filter:ut.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Cn}):r=Xt(t,e.includeContainer,ut.bind(null,e)),$t(r)},ee=function(t,e){e=e||{};var r;return e.getShadowRoot?r=X([t],e.includeContainer,{filter:Z.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):r=Xt(t,e.includeContainer,Z.bind(null,e)),r},pt=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return A.call(t,j)===!1?!1:ut(e,t)},Mn=jt.concat("iframe").join(","),ne=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return A.call(t,Mn)===!1?!1:Z(e,t)};function P(){return{getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"}}function An(n,t){if(!pt(n,P()))return In(n,t);const e=G(n),r=te(e.body,P());t==="prev"&&r.reverse();const s=r.indexOf(n);return s===-1?e.body:r.slice(s+1)[0]}function In(n,t){const e=G(n);if(!ne(n,P()))return e.body;const r=ee(e.body,P());t==="prev"&&r.reverse();const s=r.indexOf(n);return s===-1?e.body:r.slice(s+1).find(i=>pt(i,P()))??e.body}function re(n,t,e){const r=t.toLowerCase();if(r.endsWith(" ")){const d=r.slice(0,-1);if(n.filter(M=>M.toLowerCase().startsWith(d)).length<=1)return re(n,d,e);const y=e?.toLowerCase();if(y&&y.startsWith(d)&&y.charAt(d.length)===" "&&t.trim()===d)return e;const U=n.filter(M=>M.toLowerCase().startsWith(r));if(U.length>0){const M=e?n.indexOf(e):-1;return At(U,Math.max(M,0)).find(de=>de!==e)||e}}const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=o.toLowerCase(),u=e?n.indexOf(e):-1;let a=At(n,Math.max(u,0));o.length===1&&(a=a.filter(d=>d!==e));const p=a.find(d=>d?.toLowerCase().startsWith(i));return p!==e?p:void 0}function At(n,t){return n.map((e,r)=>n[(t+r)%n.length])}const Fn={afterMs:1e4,onChange:m};function se(n,t){const{afterMs:e,onChange:r,getWindow:s}={...Fn,...t};let o=null,i=b(kt(n));function u(){return s().setTimeout(()=>{h(i,n,!0),r?.(n)},e)}return I(()=>()=>{o&&s().clearTimeout(o)}),f(()=>l(i),a=>{h(i,a,!0),r?.(a),o&&s().clearTimeout(o),o=u()})}class Nn{#t;#e;#n=T(()=>this.#t.onMatch?this.#t.onMatch:t=>t.focus());#r=T(()=>this.#t.getCurrentItem?this.#t.getCurrentItem:this.#t.getActiveElement);constructor(t){this.#t=t,this.#e=se("",{afterMs:1e3,getWindow:t.getWindow}),this.handleTypeaheadSearch=this.handleTypeaheadSearch.bind(this),this.resetTypeahead=this.resetTypeahead.bind(this)}handleTypeaheadSearch(t,e){if(!e.length)return;this.#e.current=this.#e.current+t;const r=l(this.#r)(),s=e.find(a=>a===r)?.textContent?.trim()??"",o=e.map(a=>a.textContent?.trim()??""),i=re(o,this.#e.current,s),u=e.find(a=>a.textContent?.trim()===i);return u&&l(this.#n)(u),u}resetTypeahead(){this.#e.current=""}get search(){return this.#e.current}}class kn{#t;#e;#n;#r=b(null);constructor(t){this.#t=t,this.#e=T(()=>this.#t.enabled()),this.#n=se(!1,{afterMs:t.transitTimeout??300,onChange:e=>{l(this.#e)&&this.#t.setIsPointerInTransit?.(e)},getWindow:()=>Kt(this.#t.triggerNode())}),w([t.triggerNode,t.contentNode,t.enabled],([e,r,s])=>{if(!e||!r||!s)return;const o=u=>{this.#i(u,r)},i=u=>{this.#i(u,e)};return N(g(e,"pointerleave",o),g(r,"pointerleave",i))}),w(()=>l(this.#r),()=>{const e=s=>{if(!l(this.#r))return;const o=s.target;if(!ot(o))return;const i={x:s.clientX,y:s.clientY},u=t.triggerNode()?.contains(o)||t.contentNode()?.contains(o),a=!Pn(i,l(this.#r));u?this.#s():a&&(this.#s(),t.onPointerExit())},r=G(t.triggerNode()??t.contentNode());if(r)return g(r,"pointermove",e)})}#s(){h(this.#r,null),this.#n.current=!1}#i(t,e){const r=t.currentTarget;if(!x(r))return;const s={x:t.clientX,y:t.clientY},o=On(s,r.getBoundingClientRect()),i=Dn(s,o),u=Rn(e.getBoundingClientRect()),a=Ln([...i,...u]);h(this.#r,a,!0),this.#n.current=!0}}function On(n,t){const e=Math.abs(t.top-n.y),r=Math.abs(t.bottom-n.y),s=Math.abs(t.right-n.x),o=Math.abs(t.left-n.x);switch(Math.min(e,r,s,o)){case o:return"left";case s:return"right";case e:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Dn(n,t,e=5){const r=e*1.5;switch(t){case"top":return[{x:n.x-e,y:n.y+e},{x:n.x,y:n.y-r},{x:n.x+e,y:n.y+e}];case"bottom":return[{x:n.x-e,y:n.y-e},{x:n.x,y:n.y+r},{x:n.x+e,y:n.y-e}];case"left":return[{x:n.x+e,y:n.y-e},{x:n.x-r,y:n.y},{x:n.x+e,y:n.y+e}];case"right":return[{x:n.x-e,y:n.y-e},{x:n.x+r,y:n.y},{x:n.x-e,y:n.y+e}]}}function Rn(n){const{top:t,right:e,bottom:r,left:s}=n;return[{x:s,y:t},{x:e,y:t},{x:e,y:r},{x:s,y:r}]}function Pn(n,t){const{x:e,y:r}=n;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const u=t[o].x,a=t[o].y,c=t[i].x,p=t[i].y;a>r!=p>r&&e<(c-u)*(r-a)/(p-a)+u&&(s=!s)}return s}function Ln(n){const t=n.slice();return t.sort((e,r)=>e.x<r.x?-1:e.x>r.x?1:e.y<r.y?-1:e.y>r.y?1:0),Bn(t)}function Bn(n){if(n.length<=1)return n.slice();const t=[];for(let r=0;r<n.length;r++){const s=n[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const e=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;e.length>=2;){const o=e[e.length-1],i=e[e.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}return e.pop(),t.length===1&&e.length===1&&t[0].x===e[0].x&&t[0].y===e[0].y?t:t.concat(e)}const Wn="data-context-menu-trigger",Kn="data-context-menu-content",_n=new ct("Menu.Root"),gt=new ct("Menu.Root | Menu.Sub"),ie=new ct("Menu.Content"),Gn=new on("bitsmenuopen",{bubbles:!1,cancelable:!0}),Un=Ae({component:"menu",parts:["trigger","content","sub-trigger","item","group","group-heading","checkbox-group","checkbox-item","radio-group","radio-item","separator","sub-content","arrow"]});class oe{static create(t){const e=new oe(t);return _n.set(e)}opts;isUsingKeyboard=new C;#t=b(!1);get ignoreCloseAutoFocus(){return l(this.#t)}set ignoreCloseAutoFocus(t){h(this.#t,t,!0)}#e=b(!1);get isPointerInTransit(){return l(this.#e)}set isPointerInTransit(t){h(this.#e,t,!0)}constructor(t){this.opts=t}getBitsAttr=t=>Un.getAttr(t,this.opts.variant.current)}class ue{static create(t,e){return gt.set(new ue(t,e,null))}opts;root;parentMenu;contentId=f(()=>"");#t=b(null);get contentNode(){return l(this.#t)}set contentNode(t){h(this.#t,t,!0)}contentPresence;#e=b(null);get triggerNode(){return l(this.#e)}set triggerNode(t){h(this.#e,t,!0)}constructor(t,e,r){this.opts=t,this.root=e,this.parentMenu=r,this.contentPresence=new sn({ref:f(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),r&&w(()=>r.opts.open.current,()=>{r.opts.open.current||(this.opts.open.current=!1)})}toggleOpen(){this.opts.open.current=!this.opts.open.current}onOpen(){this.opts.open.current=!0}onClose(){this.opts.open.current=!1}}class ae{static create(t){return ie.set(new ae(t,gt.get()))}opts;parentMenu;rovingFocusGroup;domContext;attachment;#t=b("");get search(){return l(this.#t)}set search(t){h(this.#t,t,!0)}#e=0;#n;#r=b(!1);get mounted(){return l(this.#r)}set mounted(t){h(this.#r,t,!0)}#s;constructor(t,e){this.opts=t,this.parentMenu=e,this.domContext=new lt(t.ref),this.attachment=at(this.opts.ref,r=>{this.parentMenu.contentNode!==r&&(this.parentMenu.contentNode=r)}),e.contentId=t.id,this.#s=t.isSub??!1,this.onkeydown=this.onkeydown.bind(this),this.onblur=this.onblur.bind(this),this.onfocus=this.onfocus.bind(this),this.handleInteractOutside=this.handleInteractOutside.bind(this),new kn({contentNode:()=>this.parentMenu.contentNode,triggerNode:()=>this.parentMenu.triggerNode,enabled:()=>this.parentMenu.opts.open.current&&!!this.parentMenu.triggerNode?.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger")),onPointerExit:()=>{this.parentMenu.opts.open.current=!1},setIsPointerInTransit:r=>{this.parentMenu.root.isPointerInTransit=r}}),this.#n=new Nn({getActiveElement:()=>this.domContext.getActiveElement(),getWindow:()=>this.domContext.getWindow()}).handleTypeaheadSearch,this.rovingFocusGroup=new nn({rootNode:f(()=>this.parentMenu.contentNode),candidateAttr:this.parentMenu.root.getBitsAttr("item"),loop:this.opts.loop,orientation:f(()=>"vertical")}),w(()=>this.parentMenu.contentNode,r=>{if(!r)return;const s=()=>{E(()=>{this.parentMenu.root.isUsingKeyboard.current&&this.rovingFocusGroup.focusFirstCandidate()})};return Gn.listen(r,s)}),I(()=>{this.parentMenu.opts.open.current||this.domContext.getWindow().clearTimeout(this.#e)})}#i(){const t=this.parentMenu.contentNode;return t?Array.from(t.querySelectorAll(`[${this.parentMenu.root.getBitsAttr("item")}]:not([data-disabled])`)):[]}#u(){return this.parentMenu.root.isPointerInTransit}onCloseAutoFocus=t=>{this.opts.onCloseAutoFocus.current?.(t),!(t.defaultPrevented||this.#s)&&this.parentMenu.triggerNode&&pt(this.parentMenu.triggerNode)&&(t.preventDefault(),this.parentMenu.triggerNode.focus())};handleTabKeyDown(t){let e=this.parentMenu;for(;e.parentMenu!==null;)e=e.parentMenu;if(!e.triggerNode)return;t.preventDefault();const r=An(e.triggerNode,t.shiftKey?"prev":"next");r?(this.parentMenu.root.ignoreCloseAutoFocus=!0,e.onClose(),E(()=>{r.focus(),E(()=>{this.parentMenu.root.ignoreCloseAutoFocus=!1})})):this.domContext.getDocument().body.focus()}onkeydown(t){if(t.defaultPrevented)return;if(t.key===Ye){this.handleTabKeyDown(t);return}const e=t.target,r=t.currentTarget;if(!x(e)||!x(r))return;const s=e.closest(`[${this.parentMenu.root.getBitsAttr("content")}]`)?.id===this.parentMenu.contentId.current,o=t.ctrlKey||t.altKey||t.metaKey,i=t.key.length===1;if(this.rovingFocusGroup.handleKeydown(e,t)||t.code==="Space")return;const a=this.#i();s&&!o&&i&&this.#n(t.key,a),t.target?.id===this.parentMenu.contentId.current&&ln.includes(t.key)&&(t.preventDefault(),Ht.includes(t.key)&&a.reverse(),dn(a,{select:!1},()=>this.domContext.getActiveElement()))}onblur(t){ot(t.currentTarget)&&ot(t.target)&&(t.currentTarget.contains?.(t.target)||(this.domContext.getWindow().clearTimeout(this.#e),this.search=""))}onfocus(t){this.parentMenu.root.isUsingKeyboard.current&&E(()=>this.rovingFocusGroup.focusFirstCandidate())}onItemEnter(){return this.#u()}onItemLeave(t){if(t.currentTarget.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger"))||this.#u()||this.parentMenu.root.isUsingKeyboard.current)return;this.parentMenu.contentNode?.focus(),this.rovingFocusGroup.setCurrentTabStopId("")}onTriggerLeave(){return!!this.#u()}handleInteractOutside(t){if(!Vt(t.target))return;const e=this.parentMenu.triggerNode?.id;if(t.target.id===e){t.preventDefault();return}t.target.closest(`#${e}`)&&t.preventDefault()}get shouldRender(){return this.parentMenu.contentPresence.shouldRender}#o=T(()=>({open:this.parentMenu.opts.open.current}));get snippetProps(){return l(this.#o)}set snippetProps(t){h(this.#o,t)}#a=T(()=>({id:this.opts.id.current,role:"menu","aria-orientation":"vertical",[this.parentMenu.root.getBitsAttr("content")]:"","data-state":Dt(this.parentMenu.opts.open.current),onkeydown:this.onkeydown,onblur:this.onblur,onfocus:this.onfocus,dir:this.parentMenu.root.opts.dir.current,style:{pointerEvents:"auto"},...this.attachment}));get props(){return l(this.#a)}set props(t){h(this.#a,t)}popperProps={onCloseAutoFocus:t=>this.onCloseAutoFocus(t)}}class Vn{opts;content;attachment;#t=b(!1);constructor(t,e){this.opts=t,this.content=e,this.attachment=at(this.opts.ref),this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this)}onpointermove(t){if(!t.defaultPrevented&&Ct(t))if(this.opts.disabled.current)this.content.onItemLeave(t);else{if(this.content.onItemEnter())return;const r=t.currentTarget;if(!x(r))return;r.focus()}}onpointerleave(t){t.defaultPrevented||Ct(t)&&this.content.onItemLeave(t)}onfocus(t){E(()=>{t.defaultPrevented||this.opts.disabled.current||h(this.#t,!0)})}onblur(t){E(()=>{t.defaultPrevented||h(this.#t,!1)})}#e=T(()=>({id:this.opts.id.current,tabindex:-1,role:"menuitem","aria-disabled":Pt(this.opts.disabled.current),"data-disabled":Rt(this.opts.disabled.current),"data-highlighted":l(this.#t)?"":void 0,[this.content.parentMenu.root.getBitsAttr("item")]:"",onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,onfocus:this.onfocus,onblur:this.onblur,...this.attachment}));get props(){return l(this.#e)}set props(t){h(this.#e,t)}}class ce{static create(t){const e=new Vn(t,ie.get());return new ce(t,e)}opts;item;root;#t=!1;constructor(t,e){this.opts=t,this.item=e,this.root=e.content.parentMenu.root,this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this)}#e(){if(this.item.opts.disabled.current)return;const t=new CustomEvent("menuitemselect",{bubbles:!0,cancelable:!0});if(this.opts.onSelect.current(t),t.defaultPrevented){this.item.content.parentMenu.root.isUsingKeyboard.current=!1;return}this.opts.closeOnSelect.current&&this.item.content.parentMenu.root.opts.onClose()}onkeydown(t){const e=this.item.content.search!=="";if(!(this.item.opts.disabled.current||e&&t.key===ft)&&an.includes(t.key)){if(!x(t.currentTarget))return;t.currentTarget.click(),t.preventDefault()}}onclick(t){this.item.opts.disabled.current||this.#e()}onpointerup(t){if(!t.defaultPrevented&&!this.#t){if(!x(t.currentTarget))return;t.currentTarget?.click()}}onpointerdown(t){this.#t=!0}#n=T(()=>Ie(this.item.props,{onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown}));get props(){return l(this.#n)}set props(t){h(this.#n,t)}}class le{static create(t){return new le(t,gt.get())}opts;parentMenu;attachment;constructor(t,e){this.opts=t,this.parentMenu=e,this.attachment=at(this.opts.ref,r=>this.parentMenu.triggerNode=r)}onclick=t=>{this.opts.disabled.current||t.detail!==0||(this.parentMenu.toggleOpen(),t.preventDefault())};onpointerdown=t=>{if(!this.opts.disabled.current){if(t.pointerType==="touch")return t.preventDefault();t.button===0&&t.ctrlKey===!1&&(this.parentMenu.toggleOpen(),this.parentMenu.opts.open.current||t.preventDefault())}};onpointerup=t=>{this.opts.disabled.current||t.pointerType==="touch"&&(t.preventDefault(),this.parentMenu.toggleOpen())};onkeydown=t=>{if(!this.opts.disabled.current){if(t.key===ft||t.key===Gt){this.parentMenu.toggleOpen(),t.preventDefault();return}t.key===L&&(this.parentMenu.onOpen(),t.preventDefault())}};#t=T(()=>{if(this.parentMenu.opts.open.current&&this.parentMenu.contentId.current)return this.parentMenu.contentId.current});#e=T(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"aria-haspopup":"menu","aria-expanded":Pt(this.parentMenu.opts.open.current),"aria-controls":l(this.#t),"data-disabled":Rt(this.opts.disabled.current),"data-state":Dt(this.parentMenu.opts.open.current),[this.parentMenu.root.getBitsAttr("trigger")]:"",onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown,...this.attachment}));get props(){return l(this.#e)}set props(t){h(this.#e,t)}}globalThis.bitsDismissableLayers??=new Map;class bt{static create(t){return new bt(t)}opts;#t;#e;#n={pointerdown:!1};#r=!1;#s=!1;#i=void 0;#u;#o=m;constructor(t){this.opts=t,this.#e=t.interactOutsideBehavior,this.#t=t.onInteractOutside,this.#u=t.onFocusOutside,I(()=>{this.#i=qt(this.opts.ref.current)});let e=m;const r=()=>{this.#d(),globalThis.bitsDismissableLayers.delete(this),this.#c.destroy(),e()};w([()=>this.opts.enabled.current,()=>this.opts.ref.current],()=>{if(!(!this.opts.enabled.current||!this.opts.ref.current))return Be(1,()=>{this.opts.ref.current&&(globalThis.bitsDismissableLayers.set(this,this.#e),e(),e=this.#h())}),r}),_(()=>{this.#d.destroy(),globalThis.bitsDismissableLayers.delete(this),this.#c.destroy(),this.#o(),e()})}#a=t=>{t.defaultPrevented||this.opts.ref.current&&E(()=>{!this.opts.ref.current||this.#b(t.target)||t.target&&!this.#s&&this.#u.current?.(t)})};#h(){return N(g(this.#i,"pointerdown",N(this.#f,this.#g),{capture:!0}),g(this.#i,"pointerdown",N(this.#p,this.#c)),g(this.#i,"focusin",this.#a))}#l=t=>{let e=t;e.defaultPrevented&&(e=It(t)),this.#t.current(t)};#c=xt(t=>{if(!this.opts.ref.current){this.#o();return}const e=this.opts.isValidEvent.current(t,this.opts.ref.current)||Hn(t,this.opts.ref.current);if(!this.#r||this.#v()||!e){this.#o();return}let r=t;if(r.defaultPrevented&&(r=It(r)),this.#e.current!=="close"&&this.#e.current!=="defer-otherwise-close"){this.#o();return}t.pointerType==="touch"?(this.#o(),this.#o=g(this.#i,"click",this.#l,{once:!0})):this.#t.current(r)},10);#f=t=>{this.#n[t.type]=!0};#p=t=>{this.#n[t.type]=!1};#g=()=>{this.opts.ref.current&&(this.#r=qn(this.opts.ref.current))};#b=t=>this.opts.ref.current?zt(this.opts.ref.current,t):!1;#d=xt(()=>{for(const t in this.#n)this.#n[t]=!1;this.#r=!1},20);#v(){return Object.values(this.#n).some(Boolean)}#m=()=>{this.#s=!0};#y=()=>{this.#s=!1};props={onfocuscapture:this.#m,onblurcapture:this.#y}}function zn(n=[...globalThis.bitsDismissableLayers]){return n.findLast(([t,{current:e}])=>e==="close"||e==="ignore")}function qn(n){const t=[...globalThis.bitsDismissableLayers],e=zn(t);if(e)return e[0].opts.ref.current===n;const[r]=t[0];return r.opts.ref.current===n}function Hn(n,t){const e=n.target;if(!Vt(e))return!1;const r=!!e.closest(`[${Wn}]`);if("button"in n&&n.button>0&&!r)return!1;if("button"in n&&n.button===0&&r)return!0;const s=!!t.closest(`[${Kn}]`);return r&&s?!1:qt(e).documentElement.contains(e)&&!zt(t,e)&&un(n,t)}function It(n){const t=n.currentTarget,e=n.target;let r;n instanceof PointerEvent?r=new PointerEvent(n.type,n):r=new PointerEvent("pointerdown",n);let s=!1;return new Proxy(r,{get:(i,u)=>u==="currentTarget"?t:u==="target"?e:u==="preventDefault"?()=>{s=!0,typeof i.preventDefault=="function"&&i.preventDefault()}:u==="defaultPrevented"?s:u in i?i[u]:n[u]})}function cr(n,t){W(t,!0);let e=v(t,"interactOutsideBehavior",3,"close"),r=v(t,"onInteractOutside",3,m),s=v(t,"onFocusOutside",3,m),o=v(t,"isValidEvent",3,()=>!1);const i=bt.create({id:f(()=>t.id),interactOutsideBehavior:f(()=>e()),onInteractOutside:f(()=>r()),enabled:f(()=>t.enabled),onFocusOutside:f(()=>s()),isValidEvent:f(()=>o()),ref:t.ref});var u=J(),a=$(u);et(a,()=>t.children??tt,()=>({props:i.props})),Q(n,u),K()}globalThis.bitsEscapeLayers??=new Map;class vt{static create(t){return new vt(t)}opts;domContext;constructor(t){this.opts=t,this.domContext=new lt(this.opts.ref);let e=m;w(()=>t.enabled.current,r=>(r&&(globalThis.bitsEscapeLayers.set(this,t.escapeKeydownBehavior),e=this.#t()),()=>{e(),globalThis.bitsEscapeLayers.delete(this)}))}#t=()=>g(this.domContext.getDocument(),"keydown",this.#e,{passive:!1});#e=t=>{if(t.key!==qe||!jn(this))return;const e=new KeyboardEvent(t.type,t);t.preventDefault();const r=this.opts.escapeKeydownBehavior.current;r!=="close"&&r!=="defer-otherwise-close"||this.opts.onEscapeKeydown.current(e)}}function jn(n){const t=[...globalThis.bitsEscapeLayers],e=t.findLast(([s,{current:o}])=>o==="close"||o==="ignore");if(e)return e[0]===n;const[r]=t[0];return r===n}function lr(n,t){W(t,!0);let e=v(t,"escapeKeydownBehavior",3,"close"),r=v(t,"onEscapeKeydown",3,m);vt.create({escapeKeydownBehavior:f(()=>e()),onEscapeKeydown:f(()=>r()),enabled:f(()=>t.enabled),ref:t.ref});var s=J(),o=$(s);et(o,()=>t.children??tt),Q(n,s),K()}class mt{static instance;#t=Fe([]);#e=new WeakMap;#n=new WeakMap;static getInstance(){return this.instance||(this.instance=new mt),this.instance}register(t){const e=this.getActive();e&&e!==t&&e.pause();const r=document.activeElement;r&&r!==document.body&&this.#n.set(t,r),this.#t.current=this.#t.current.filter(s=>s!==t),this.#t.current.unshift(t)}unregister(t){this.#t.current=this.#t.current.filter(r=>r!==t);const e=this.getActive();e&&e.resume()}getActive(){return this.#t.current[0]}setFocusMemory(t,e){this.#e.set(t,e)}getFocusMemory(t){return this.#e.get(t)}isActiveScope(t){return this.getActive()===t}setPreFocusMemory(t,e){this.#n.set(t,e)}getPreFocusMemory(t){return this.#n.get(t)}clearPreFocusMemory(t){this.#n.delete(t)}}class yt{#t=!1;#e=null;#n=mt.getInstance();#r=[];#s;constructor(t){this.#s=t}get paused(){return this.#t}pause(){this.#t=!0}resume(){this.#t=!1}#i(){for(const t of this.#r)t();this.#r=[]}mount(t){this.#e&&this.unmount(),this.#e=t,this.#n.register(this),this.#a(),this.#u()}unmount(){this.#e&&(this.#i(),this.#o(),this.#n.unregister(this),this.#n.clearPreFocusMemory(this),this.#e=null)}#u(){if(!this.#e)return;const t=new CustomEvent("focusScope.onOpenAutoFocus",{bubbles:!1,cancelable:!0});this.#s.onOpenAutoFocus.current(t),t.defaultPrevented||requestAnimationFrame(()=>{if(!this.#e)return;const e=this.#l();e?(e.focus(),this.#n.setFocusMemory(this,e)):this.#e.focus()})}#o(){const t=new CustomEvent("focusScope.onCloseAutoFocus",{bubbles:!1,cancelable:!0});if(this.#s.onCloseAutoFocus.current?.(t),!t.defaultPrevented){const e=this.#n.getPreFocusMemory(this);if(e&&document.contains(e))try{e.focus()}catch{document.body.focus()}}}#a(){if(!this.#e||!this.#s.trap.current)return;const t=this.#e,e=t.ownerDocument,r=i=>{if(this.#t||!this.#n.isActiveScope(this))return;const u=i.target;if(!u)return;if(t.contains(u))this.#n.setFocusMemory(this,u);else{const c=this.#n.getFocusMemory(this);if(c&&t.contains(c)&&ne(c))i.preventDefault(),c.focus();else{const p=this.#l(),d=this.#c()[0];(p||d||t).focus()}}},s=i=>{if(!this.#s.loop||this.#t||i.key!=="Tab"||!this.#n.isActiveScope(this))return;const u=this.#h();if(u.length<2)return;const a=u[0],c=u[u.length-1];!i.shiftKey&&e.activeElement===c?(i.preventDefault(),a.focus()):i.shiftKey&&e.activeElement===a&&(i.preventDefault(),c.focus())};this.#r.push(g(e,"focusin",r,{capture:!0}),g(t,"keydown",s));const o=new MutationObserver(()=>{const i=this.#n.getFocusMemory(this);if(i&&!t.contains(i)){const u=this.#l(),a=this.#c()[0],c=u||a;c?(c.focus(),this.#n.setFocusMemory(this,c)):t.focus()}});o.observe(t,{childList:!0,subtree:!0}),this.#r.push(()=>o.disconnect())}#h(){return this.#e?te(this.#e,{includeContainer:!1,getShadowRoot:!0}):[]}#l(){return this.#h()[0]||null}#c(){return this.#e?ee(this.#e,{includeContainer:!1,getShadowRoot:!0}):[]}static use(t){let e=null;return w([()=>t.ref.current,()=>t.enabled.current],([r,s])=>{r&&s?(e||(e=new yt(t)),e.mount(r)):e&&(e.unmount(),e=null)}),_(()=>{e?.unmount()}),{get props(){return{tabindex:-1}}}}}function hr(n,t){W(t,!0);let e=v(t,"enabled",3,!1),r=v(t,"trapFocus",3,!1),s=v(t,"loop",3,!1),o=v(t,"onCloseAutoFocus",3,m),i=v(t,"onOpenAutoFocus",3,m);const u=yt.use({enabled:f(()=>e()),trap:f(()=>r()),loop:s(),onCloseAutoFocus:f(()=>o()),onOpenAutoFocus:f(()=>i()),ref:t.ref});var a=J(),c=$(a);et(c,()=>t.focusScope??tt,()=>({props:u.props})),Q(n,a),K()}globalThis.bitsTextSelectionLayers??=new Map;class wt{static create(t){return new wt(t)}opts;domContext;#t=m;constructor(t){this.opts=t,this.domContext=new lt(t.ref);let e=m;w(()=>this.opts.enabled.current,r=>(r&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),e(),e=this.#e()),()=>{e(),this.#r(),globalThis.bitsTextSelectionLayers.delete(this)}))}#e(){return N(g(this.domContext.getDocument(),"pointerdown",this.#n),g(this.domContext.getDocument(),"pointerup",Ne(this.#r,this.opts.onPointerUp.current)))}#n=t=>{const e=this.opts.ref.current,r=t.target;!x(e)||!x(r)||!this.opts.enabled.current||!Xn(this)||!Ve(e,r)||(this.opts.onPointerDown.current(t),!t.defaultPrevented&&(this.#t=Yn(e,this.domContext.getDocument().body)))};#r=()=>{this.#t(),this.#t=m}}const Ft=n=>n.style.userSelect||n.style.webkitUserSelect;function Yn(n,t){const e=Ft(t),r=Ft(n);return V(t,"none"),V(n,"text"),()=>{V(t,e),V(n,r)}}function V(n,t){n.style.userSelect=t,n.style.webkitUserSelect=t}function Xn(n){const t=[...globalThis.bitsTextSelectionLayers];if(!t.length)return!1;const e=t.at(-1);return e?e[0]===n:!1}function dr(n,t){W(t,!0);let e=v(t,"preventOverflowTextSelection",3,!0),r=v(t,"onPointerDown",3,m),s=v(t,"onPointerUp",3,m);wt.create({id:f(()=>t.id),onPointerDown:f(()=>r()),onPointerUp:f(()=>s()),enabled:f(()=>t.enabled&&e()),ref:t.ref});var o=J(),i=$(o);et(i,()=>t.children??tt),Q(n,o),K()}globalThis.bitsIdCounter??={current:0};function Zn(n="bits"){return globalThis.bitsIdCounter.current++,`${n}-${globalThis.bitsIdCounter.current}`}class Jn{#t;#e=0;#n=b();#r;constructor(t){this.#t=t}#s(){this.#e-=1,this.#r&&this.#e<=0&&(this.#r(),h(this.#n,void 0),this.#r=void 0)}get(...t){return this.#e+=1,l(this.#n)===void 0&&(this.#r=Ot(()=>{h(this.#n,this.#t(...t),!0)})),I(()=>()=>{this.#s()}),l(this.#n)}}const q=new De;let z=b(null),rt=null,O=null,D=!1;const Nt=f(()=>{for(const n of q.values())if(n)return!0;return!1});let st=null;const Qn=new Jn(()=>{function n(){document.body.setAttribute("style",l(z)??""),document.body.style.removeProperty("--scrollbar-width"),Et&&rt?.(),h(z,null)}function t(){O!==null&&(window.clearTimeout(O),O=null)}function e(s,o){t(),D=!0,st=Date.now();const i=st,u=()=>{O=null,st===i&&(he(q)?D=!1:(D=!1,o()))},a=s===null?24:s;O=window.setTimeout(u,a)}function r(){l(z)===null&&q.size===0&&!D&&h(z,document.body.getAttribute("style"),!0)}return w(()=>Nt.current,()=>{if(!Nt.current)return;r(),D=!1;const s=getComputedStyle(document.body),o=window.innerWidth-document.documentElement.clientWidth,u={padding:Number.parseInt(s.paddingRight??"0",10)+o,margin:Number.parseInt(s.marginRight??"0",10)};o>0&&(document.body.style.paddingRight=`${u.padding}px`,document.body.style.marginRight=`${u.margin}px`,document.body.style.setProperty("--scrollbar-width",`${o}px`),document.body.style.overflow="hidden"),Et&&(rt=g(document,"touchmove",a=>{a.target===document.documentElement&&(a.touches.length>1||a.preventDefault())},{passive:!1})),E(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})}),_(()=>()=>{rt?.()}),{get lockMap(){return q},resetBodyStyle:n,scheduleCleanupIfNoNewLocks:e,cancelPendingCleanup:t,ensureInitialStyleCaptured:r}});class $n{#t=Zn();#e;#n=()=>null;#r;locked;constructor(t,e=()=>null){this.#e=t,this.#n=e,this.#r=Qn.get(),this.#r&&(this.#r.cancelPendingCleanup(),this.#r.ensureInitialStyleCaptured(),this.#r.lockMap.set(this.#t,this.#e??!1),this.locked=f(()=>this.#r.lockMap.get(this.#t)??!1,r=>this.#r.lockMap.set(this.#t,r)),_(()=>{if(this.#r.lockMap.delete(this.#t),he(this.#r.lockMap))return;const r=this.#n();this.#r.scheduleCleanupIfNoNewLocks(r,()=>{this.#r.resetBodyStyle()})}))}}function he(n){for(const[t,e]of n)if(e)return!0;return!1}function fr(n,t){W(t,!0);let e=v(t,"preventScroll",3,!0),r=v(t,"restoreScrollDelay",3,null);e()&&new $n(e(),()=>r()),K()}let R=b(!1);class C{static _refs=0;static _cleanup;constructor(){I(()=>(C._refs===0&&(C._cleanup=Ot(()=>{const t=[],e=s=>{h(R,!1)},r=s=>{h(R,!0)};return t.push(g(document,"pointerdown",e,{capture:!0}),g(document,"pointermove",e,{capture:!0}),g(document,"keydown",r,{capture:!0})),N(...t)})),C._refs++,()=>{C._refs--,C._refs===0&&(h(R,!1),C._cleanup?.())}))}get current(){return l(R)}set current(t){h(R,t,!0)}}export{ct as C,lt as D,Gt as E,hr as F,kn as G,ce as M,sn as P,ft as S,dr as T,oe as a,ue as b,ae as c,le as d,lr as e,cr as f,fr as g,ke as h,$e as i,ar as j,Kt as k,ur as l,ot as m,m as n,_ as o,Zn as u,w};
